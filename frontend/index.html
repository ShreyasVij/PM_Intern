<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PM Intern Matcher — More Vertical Space</title>
</head>
<body>
  <div class="topbar">
    <h1>PM Intern Matcher</h1>
    <div class="muted">Search-first UI • backend: <code id="apiBaseDisplay">http://127.0.0.1:3000/api</code></div>
  </div>

  <div class="wrap">
    <!-- LEFT: Candidates (search-first) -->
    <div class="panel fullheight" id="candidatesPanel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <strong>Candidates</strong>
          <div class="small">Search to show candidates (name / skill / location)</div>
        </div>
        <div class="controls-right">
          <button id="reloadBtn" class="btn ghost">Reload</button>
        </div>
      </div>

      <div style="margin-top:12px">
        <div class="filters-row">
          <input id="searchName" type="text" placeholder="Search name..." />
          <input id="filterSkill" type="text" placeholder="Filter skill..." />
          <input id="filterLocation" type="text" placeholder="Filter location..." />
        </div>
        <div class="result-meta small">
          <div id="candidatesCount">No search yet</div>
          <div><button id="candidatesClear" class="show-more">Clear</button></div>
        </div>
      </div>

      <div class="cards-scroller" id="candidatesList" aria-live="polite">
        <div class="empty">Start typing to search candidates.</div>
      </div>

      <div style="margin-top:12px;display:flex;justify-content:center;gap:8px">
        <button id="candidatesShowMore" class="show-more" style="display:none">Show more candidates</button>
      </div>

      <div class="note">Tip: type a skill (eg. <code>python</code>) or a name to find candidates quickly.</div>
    </div>

    <!-- RIGHT: Internships (search-first) + recommendations area -->
    <div class="panel fullheight" id="internshipsPanel">
      <!-- split container -->
      <div class="right-split">
        <!-- internships area (top) -->
        <div class="internships-area">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <strong>Internships</strong>
              <div class="small">Search internships (title / skill / location)</div>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
              <div class="small">Selected:</div>
              <div id="selectedCandidateLabel" class="tag">none</div>
            </div>
          </div>

          <div style="margin-top:12px">
            <div class="filters-row">
              <input id="internSearch" type="text" placeholder="Search title or skill..." />
              <input id="internLocation" type="text" placeholder="Filter location..." />
            </div>
            <div class="result-meta small">
              <div id="internCount">No search yet</div>
              <div><button id="internshipsClear" class="show-more">Clear</button></div>
            </div>
          </div>

          <!-- internships scroller -->
          <div class="cards-scroller" id="internshipsList" aria-live="polite">
            <div class="empty">Start typing to search internships.</div>
          </div>

          <div style="margin-top:12px;display:flex;justify-content:center;gap:8px">
            <button id="internShowMore" class="show-more" style="display:none">Show more internships</button>
          </div>
        </div>

        <!-- recommendations area (bottom) - independent scroller -->
        <div class="recommendations-area" id="recommendationsAreaWrapper">
          <div style="margin-bottom:8px"><strong>Recommendations</strong></div>
          <div id="recommendationsArea" class="small">
            <div class="empty">Select a candidate (left) or pick from the dropdown to see recommendations.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BOTTOM: Add Profile + Get Match -->
  <div style="max-width:1200px;margin:20px auto 60px;">
    <div class="panel">
      <strong>Add / Register Profile & Get Match</strong>
      <!-- Wrap in a form to handle submission properly -->
      <form id="profileForm" style="margin-top:10px;display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start">
        <input id="p_name" type="text" placeholder="Full name" style="flex:2" required />
        <input id="p_location" type="text" placeholder="Location preference" style="flex:1" required />
        <input id="p_skills" type="text" placeholder="Skills (comma separated)" style="flex:2" required />
        <button id="saveProfileBtn" type="submit" class="btn">Save + Get Match</button>
        <button id="resetProfileBtn" type="button" class="btn ghost">Reset</button>
      </form>
      <div id="profileMsg" class="note" style="margin-top:8px"></div>
      <div class="note" style="margin-top:10px">Note: After saving, UI will attempt to request recommendations for the created profile. If your backend stores profiles in <code>profiles.json</code> instead of <code>candidates.json</code>, recommendations will fail until the server merges them into candidates.</div>
    </div>
  </div>
</body>
</html>